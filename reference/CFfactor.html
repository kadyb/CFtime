<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a factor from the offsets in a CFTime instance — CFfactor • CFtime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a factor from the offsets in a CFTime instance — CFfactor"><meta name="description" content="With this function a factor can be generated for the time series, or a part
thereof, contained in the CFTime instance. This is specifically interesting
for creating factors from the date part of the time series that aggregate the
time series into longer time periods (such as month) that can then be used to
process daily CF data sets using, for instance, tapply()."><meta property="og:description" content="With this function a factor can be generated for the time series, or a part
thereof, contained in the CFTime instance. This is specifically interesting
for creating factors from the date part of the time series that aggregate the
time series into longer time periods (such as month) that can then be used to
process daily CF data sets using, for instance, tapply()."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CFtime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cftime.html">Working with CFtime</a></li>
    <li><a class="dropdown-item" href="../articles/conformance.html">Conformance with the CF Metadata Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/processing.html">Processing climate projection data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/CFtime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a factor from the offsets in a <code>CFTime</code> instance</h1>
      <small class="dont-index">Source: <a href="https://github.com/R-CF/CFtime/blob/main/R/api.R" class="external-link"><code>R/api.R</code></a></small>
      <div class="d-none name"><code>CFfactor.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>With this function a factor can be generated for the time series, or a part
thereof, contained in the <a href="CFtime.html">CFTime</a> instance. This is specifically interesting
for creating factors from the date part of the time series that aggregate the
time series into longer time periods (such as month) that can then be used to
process daily CF data sets using, for instance, <code><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CFfactor</span><span class="op">(</span><span class="va">t</span>, period <span class="op">=</span> <span class="st">"month"</span>, era <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-t">t<a class="anchor" aria-label="anchor" href="#arg-t"></a></dt>
<dd><p>An instance of the <code>CFTime</code> class whose offsets will be used to
construct the factor.</p></dd>


<dt id="arg-period">period<a class="anchor" aria-label="anchor" href="#arg-period"></a></dt>
<dd><p>character. A character string with one of the values "year",
"season", "quarter", "month" (the default), "dekad" or "day".</p></dd>


<dt id="arg-era">era<a class="anchor" aria-label="anchor" href="#arg-era"></a></dt>
<dd><p>numeric or list, optional. Vector of years for which to
construct the factor, or a list whose elements are each a vector of years.
If <code>era</code> is not specified, the factor will use the entire time series for
the factor.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If <code>era</code> is a single vector or not specified, a factor with a
length equal to the number of offsets in <code>t</code>. If <code>era</code> is a list, a list
with the same number of elements and names as <code>era</code>, each containing a
factor. Elements in the factor will be set to <code>NA</code> for time series values
outside of the range of specified years.</p>
<p>The factor, or factors in the list, have attributes 'period', 'era' and
'CFTime'. Attribute 'period' holds the value of the <code>period</code> argument.
Attribute 'era' indicates the number of years that are included in the
era, or -1 if no <code>era</code> is provided. Attribute 'CFTime' holds an
instance of <code>CFTime</code> that has the same definition as <code>t</code>, but with offsets
corresponding to the mid-point of non-era factor levels; if the <code>era</code>
argument is specified, attribute 'CFTime' is <code>NULL</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The factor will respect the calendar that the time series is built on. For
<code>period</code>s longer than a day this will result in a factor where the calendar
is no longer relevant (because calendars impacts days, not dekads, months,
quarters, seasons or years).</p>
<p>The factor will be generated in the order of the offsets of the <code>CFTime</code>
instance. While typical CF-compliant data sources use ordered time series
there is, however, no guarantee that the factor is ordered as multiple
<code>CFTime</code> objects may have been merged out of order. For most processing with
a factor the ordering is of no concern.</p>
<p>If the <code>era</code> parameter is specified, either as a vector of years to include
in the factor, or as a list of such vectors, the factor will only consider
those values in the time series that fall within the list of years, inclusive
of boundary values. Other values in the factor will be set to <code>NA</code>. The years
need not be contiguous, within a single vector or among the list items, or in
order.</p>
<p>The following periods are supported by this function:</p>
<ul><li><p><code>year</code>, the year of each offset is returned as "YYYY".</p></li>
<li><p><code>season</code>, the meteorological season of each offset is returned as
"Sx", with x being 1-4, preceeded by "YYYY" if no <code>era</code> is
specified. Note that December dates are labeled as belonging to the
subsequent year, so the date "2020-12-01" yields "2021S1". This implies
that for standard CMIP files having one or more full years of data the
first season will have data for the first two months (January and
February), while the final season will have only a single month of data
(December).</p></li>
<li><p><code>quarter</code>, the calendar quarter of each offset is returned as "Qx",
with x being 1-4, preceeded by "YYYY" if no <code>era</code> is specified.</p></li>
<li><p><code>month</code>, the month of each offset is returned as "01" to
"12", preceeded by "YYYY-" if no <code>era</code> is specified. This is the default
period.</p></li>
<li><p><code>dekad</code>, ten-day periods are returned as
"Dxx", where xx runs from "01" to "36", preceeded by "YYYY" if no <code>era</code>
is specified. Each month is subdivided in dekads as follows: 1- days 01 -
10; 2- days 11 - 20; 3- remainder of the month.</p></li>
<li><p><code>day</code>, the month and day of each offset are returned as "MM-DD",
preceeded by "YYYY-" if no <code>era</code> is specified.</p></li>
</ul><p>It is not possible to create a factor for a period that is shorter than the
temporal resolution of the source data set from which the <code>t</code> argument
derives. As an example, if the source data set has monthly data, a dekad or
day factor cannot be created.</p>
<p>Creating factors for other periods is not supported by this function. Factors
based on the timestamp information and not dependent on the calendar can
trivially be constructed from the output of the <code><a href="as_timestamp.html">as_timestamp()</a></code> function.</p>
<p>For non-era factors the attribute 'CFTime' of the result contains a <code>CFTime</code>
instance that is valid for the result of applying the factor to a data set
that the <code>t</code> argument is associated with. In other words, if <code>CFTime</code>
instance 'At' describes the temporal dimension of data set 'A' and a factor
'Af' is generated like <code>Af &lt;- CFfactor(At)</code>, then <code>Bt &lt;- attr(Af, "CFTime")</code>
describes the temporal dimension of the result of, say,
<code>B &lt;- apply(A, 1:2, tapply, Af, FUN)</code>. The 'CFTime' attribute is <code>NULL</code> for
era factors.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="cut.CFTime.html">cut()</a></code> creates a non-era factor for arbitrary cut points.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="CFtime-function.html">CFtime</a></span><span class="op">(</span><span class="st">"days since 1949-12-01"</span>, <span class="st">"360_day"</span>, <span class="fl">19830</span><span class="op">:</span><span class="fl">54029</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a dekad factor for the whole time series</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">CFfactor</span><span class="op">(</span><span class="va">t</span>, <span class="st">"dekad"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create three monthly factors for early, mid and late 21st century eras</span></span></span>
<span class="r-in"><span><span class="va">ep</span> <span class="op">&lt;-</span> <span class="fu">CFfactor</span><span class="op">(</span><span class="va">t</span>, era <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>early <span class="op">=</span> <span class="fl">2021</span><span class="op">:</span><span class="fl">2040</span>, mid <span class="op">=</span> <span class="fl">2041</span><span class="op">:</span><span class="fl">2060</span>, late <span class="op">=</span> <span class="fl">2061</span><span class="op">:</span><span class="fl">2080</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

