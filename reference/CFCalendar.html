<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Basic CF calendar — CFCalendar • CFtime</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Basic CF calendar — CFCalendar"><meta name="description" content="This class represents a basic CF calendar. It should not be
instantiated directly; instead, use one of the descendant classes.
This internal class stores the information to represent date and time
values using the CF conventions. An instance is created by the exported
CFTime class, which also exposes the relevant properties of this class.
The following calendars are supported:

gregorian\standard, the international standard calendar for civil use.
proleptic_gregorian, the standard calendar but extending before 1582-10-15
when the Gregorian calendar was adopted.
tai, International Atomic Time clock with dates expressed using the Gregorian calendar.
utc, Coordinated Universal Time clock with dates expressed using the Gregorian calendar.
julian, every fourth year is a leap year (so including the years 1700, 1800, 1900, 2100, etc).
noleap\365_day, all years have 365 days.
all_leap\366_day, all years have 366 days.
360_day, all years have 360 days, divided over 12 months of 30 days.

"><meta property="og:description" content="This class represents a basic CF calendar. It should not be
instantiated directly; instead, use one of the descendant classes.
This internal class stores the information to represent date and time
values using the CF conventions. An instance is created by the exported
CFTime class, which also exposes the relevant properties of this class.
The following calendars are supported:

gregorian\standard, the international standard calendar for civil use.
proleptic_gregorian, the standard calendar but extending before 1582-10-15
when the Gregorian calendar was adopted.
tai, International Atomic Time clock with dates expressed using the Gregorian calendar.
utc, Coordinated Universal Time clock with dates expressed using the Gregorian calendar.
julian, every fourth year is a leap year (so including the years 1700, 1800, 1900, 2100, etc).
noleap\365_day, all years have 365 days.
all_leap\366_day, all years have 366 days.
360_day, all years have 360 days, divided over 12 months of 30 days.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CFtime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cftime.html">Working with CFtime</a></li>
    <li><a class="dropdown-item" href="../articles/conformance.html">Conformance with the CF Metadata Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/processing.html">Processing climate projection data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/CFtime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Basic CF calendar</h1>
      <small class="dont-index">Source: <a href="https://github.com/R-CF/CFtime/blob/main/R/CFCalendar.R" class="external-link"><code>R/CFCalendar.R</code></a></small>
      <div class="d-none name"><code>CFCalendar.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This class represents a basic CF calendar. It should not be
instantiated directly; instead, use one of the descendant classes.</p>
<p>This internal class stores the information to represent date and time
values using the CF conventions. An instance is created by the exported
<a href="CFtime.html">CFTime</a> class, which also exposes the relevant properties of this class.</p>
<p>The following calendars are supported:</p>
<ul><li><p><code><a href="CFCalendarStandard.html">gregorian\standard</a></code>, the international standard calendar for civil use.</p></li>
<li><p><code><a href="CFCalendarProleptic.html">proleptic_gregorian</a></code>, the standard calendar but extending before 1582-10-15
when the Gregorian calendar was adopted.</p></li>
<li><p><code><a href="CFCalendarTAI.html">tai</a></code>, International Atomic Time clock with dates expressed using the Gregorian calendar.</p></li>
<li><p><code><a href="CFCalendarUTC.html">utc</a></code>, Coordinated Universal Time clock with dates expressed using the Gregorian calendar.</p></li>
<li><p><code><a href="CFCalendarJulian.html">julian</a></code>, every fourth year is a leap year (so including the years 1700, 1800, 1900, 2100, etc).</p></li>
<li><p><code><a href="CFCalendar365.html">noleap\365_day</a></code>, all years have 365 days.</p></li>
<li><p><code><a href="CFCalendar366.html">all_leap\366_day</a></code>, all years have 366 days.</p></li>
<li><p><code><a href="CFCalendar360.html">360_day</a></code>, all years have 360 days, divided over 12 months of 30 days.</p></li>
</ul></div>


    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#calendar</p>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>name</code></dt>
<dd><p>Descriptive name of the calendar, as per the CF Metadata
Conventions.</p></dd>


<dt><code>definition</code></dt>
<dd><p>The string that defines the units and the origin, as
per the CF Metadata Conventions.</p></dd>


<dt><code>unit</code></dt>
<dd><p>The numeric id of the unit of the calendar.</p></dd>


<dt><code>origin</code></dt>
<dd><p><code>data.frame</code> with fields for the origin of the calendar.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="active-bindings">Active bindings<a class="anchor" aria-label="anchor" href="#active-bindings"></a></h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>origin_date</code></dt>
<dd><p>(read-only) Character string with the date of the
calendar.</p></dd>


<dt><code>origin_time</code></dt>
<dd><p>(read-only) Character string with the time of the
calendar.</p></dd>


<dt><code>timezone</code></dt>
<dd><p>(read-only) Character string with the time zone of the
origin of the calendar.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-CFCalendar-new"><code>CFCalendar$new()</code></a></p></li>
<li><p><a href="#method-CFCalendar-print"><code>CFCalendar$print()</code></a></p></li>
<li><p><a href="#method-CFCalendar-valid_days"><code>CFCalendar$valid_days()</code></a></p></li>
<li><p><a href="#method-CFCalendar-add_day"><code>CFCalendar$add_day()</code></a></p></li>
<li><p><a href="#method-CFCalendar-POSIX_compatible"><code>CFCalendar$POSIX_compatible()</code></a></p></li>
<li><p><a href="#method-CFCalendar-is_compatible"><code>CFCalendar$is_compatible()</code></a></p></li>
<li><p><a href="#method-CFCalendar-is_equivalent"><code>CFCalendar$is_equivalent()</code></a></p></li>
<li><p><a href="#method-CFCalendar-parse"><code>CFCalendar$parse()</code></a></p></li>
<li><p><a href="#method-CFCalendar-offsets2time"><code>CFCalendar$offsets2time()</code></a></p></li>
<li><p><a href="#method-CFCalendar-clone"><code>CFCalendar$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-CFCalendar-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new CF calendar.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/CFCalendar.html">CFCalendar</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">nm</span>, <span class="va">definition</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>nm</code></dt>
<dd><p>The name of the calendar. This must follow the CF Metadata
Conventions.</p></dd>


<dt><code>definition</code></dt>
<dd><p>The string that defines the units and the origin, as
per the CF Metadata Conventions.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CFCalendar-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print information about the calendar to the console.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Ignored.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p><code>self</code>, invisibly.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-valid_days"></a><div class="section">
<h3 id="method-valid-days-">Method <code>valid_days()</code><a class="anchor" aria-label="anchor" href="#method-valid-days-"></a></h3>
<p>Indicate which of the supplied dates are valid.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">valid_days</span><span class="op">(</span><span class="va">ymd</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>ymd</code></dt>
<dd><p><code>data.frame</code> with dates parsed into their parts in columns
<code>year</code>, <code>month</code> and <code>day</code>. Any other columns are disregarded.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p><code>NULL</code>. A warning will be generated to the effect that a
descendant class should be used for this method.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-add_day"></a><div class="section">
<h3 id="method-add-day-">Method <code>add_day()</code><a class="anchor" aria-label="anchor" href="#method-add-day-"></a></h3>
<p>Add a day to the supplied dates.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">add_day</span><span class="op">(</span><span class="va">ymd</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>ymd</code></dt>
<dd><p><code>data.frame</code> with dates parsed into their parts in columns
<code>year</code>, <code>month</code> and <code>day</code>. Any other columns are disregarded.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A <code>data.frame</code> like argument <code>ymd</code> but with a day added for every
row.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-POSIX_compatible"></a><div class="section">
<h3 id="method-posix-compatible-">Method <code>POSIX_compatible()</code><a class="anchor" aria-label="anchor" href="#method-posix-compatible-"></a></h3>
<p>Indicate if the time series described using this calendar
can be safely converted to a standard date-time type (<code>POSIXct</code>,
<code>POSIXlt</code>, <code>Date</code>).</p>
<p>Only the 'standard' calendar and the 'proleptic_gregorian' calendar
when all dates in the time series are more recent than 1582-10-15
(inclusive) can be safely converted, so this method returns <code>FALSE</code> by
default to cover the majority of cases.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">POSIX_compatible</span><span class="op">(</span><span class="va">offsets</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>offsets</code></dt>
<dd><p>The offsets from the CFtime instance.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p><code>FALSE</code> by default.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-is_compatible"></a><div class="section">
<h3 id="method-is-compatible-">Method <code>is_compatible()</code><a class="anchor" aria-label="anchor" href="#method-is-compatible-"></a></h3>
<p>This method tests if the <code>CFCalendar</code> instance in argument
<code>cal</code> is compatible with <code>self</code>, meaning that they are of the same
class and have the same unit. Calendars "standard", and "gregorian" are
compatible, as are the pairs of "365_day" and "no_leap", and "366_day"
and "all_leap".</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">is_compatible</span><span class="op">(</span><span class="va">cal</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>cal</code></dt>
<dd><p>Instance of a descendant of the <code>CFCalendar</code> class.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p><code>TRUE</code> if the instance in argument <code>cal</code> is compatible with
<code>self</code>, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-is_equivalent"></a><div class="section">
<h3 id="method-is-equivalent-">Method <code>is_equivalent()</code><a class="anchor" aria-label="anchor" href="#method-is-equivalent-"></a></h3>
<p>This method tests if the <code>CFCalendar</code> instance in argument
<code>cal</code> is equivalent to <code>self</code>, meaning that they are of the same class,
have the same unit, and equivalent origins. Calendars "standard", and
"gregorian" are equivalent, as are the pairs of "365_day" and
"no_leap", and "366_day" and "all_leap".</p>
<p>Note that the origins need not be identical, but their parsed values
have to be. "2000-01" is parsed the same as "2000-01-01 00:00:00", for
instance.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">is_equivalent</span><span class="op">(</span><span class="va">cal</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>cal</code></dt>
<dd><p>Instance of a descendant of the <code>CFCalendar</code> class.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p><code>TRUE</code> if the instance in argument <code>cal</code> is equivalent to
<code>self</code>, <code>FALSE</code> otherwise.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-parse"></a><div class="section">
<h3 id="method-parse-">Method <code><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse()</a></code><a class="anchor" aria-label="anchor" href="#method-parse-"></a></h3>
<p>Parsing a vector of date-time character strings into parts.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">parse</span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>d</code></dt>
<dd><p>character. A character vector of date-times.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p>A <code>data.frame</code> with columns year, month, day, hour, minute,
second, time zone, and offset. Invalid input data will appear as <code>NA</code>.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-offsets2time"></a><div class="section">
<h3 id="method-offsets-time-">Method <code>offsets2time()</code><a class="anchor" aria-label="anchor" href="#method-offsets-time-"></a></h3>
<p>Decompose a vector of offsets, in units of the calendar, to
their timestamp values. This adds a specified amount of time to the
origin of a <code>CFTime</code> object.</p>
<p>This method may introduce inaccuracies where the calendar unit is
"months" or "years", due to the ambiguous definition of these units.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">offsets2time</span><span class="op">(</span>offsets <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>offsets</code></dt>
<dd><p>Vector of numeric offsets to add to the origin of the
calendar.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p>A <code>data.frame</code> with columns for the timestamp elements and as
many rows as there are offsets.</p>
</div>

</div><p></p><hr><a id="method-CFCalendar-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CFCalendar</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

