<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using CF-Compliant Calendars with Climate Projection Data • CFtime</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Using CF-Compliant Calendars with Climate Projection Data">
<meta name="description" content="Support for all calendars as specified in the Climate and Forecast (CF) Metadata Conventions for climate and forecasting data. The CF Metadata Conventions is widely used for distributing files with climate observations or projections, including the Coupled Model Intercomparison Project (CMIP) data used by climate change scientists and the Intergovernmental Panel on Climate Change (IPCC). This package specifically allows the user to work with any of the CF-compliant calendars (many of which are not compliant with POSIXt). The CF time coordinate is formally defined in the CF Metadata Conventions document available at &lt;https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#time-coordinate&gt;.">
<meta property="og:description" content="Support for all calendars as specified in the Climate and Forecast (CF) Metadata Conventions for climate and forecasting data. The CF Metadata Conventions is widely used for distributing files with climate observations or projections, including the Coupled Model Intercomparison Project (CMIP) data used by climate change scientists and the Intergovernmental Panel on Climate Change (IPCC). This package specifically allows the user to work with any of the CF-compliant calendars (many of which are not compliant with POSIXt). The CF time coordinate is formally defined in the CF Metadata Conventions document available at &lt;https://cfconventions.org/Data/cf-conventions/cf-conventions-1.12/cf-conventions.html#time-coordinate&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">CFtime</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/cftime.html">Working with CFtime</a></li>
    <li><a class="dropdown-item" href="articles/conformance.html">Conformance with the CF Metadata Conventions</a></li>
    <li><a class="dropdown-item" href="articles/processing.html">Processing climate projection data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/R-CF/CFtime/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cftime">CFtime<a class="anchor" aria-label="anchor" href="#cftime"></a>
</h1></div>
<!-- badges: start -->

<!-- badges: end -->
<p>CFtime is an R package that supports working with <a href="http://cfconventions.org" class="external-link">CF Metadata Conventions</a> time coordinates, specifically geared to time-referencing data sets of climate projections such as those produced under the <a href="https://www.wcrp-climate.org" class="external-link">World Climate Research Programme</a> and re-analysis data such as ERA5 from the European Centre for Medium-range Weather Forecasts (ECMWF).</p>
<p>The data sets include in their metadata an epoch, or origin, a point in time from which other points in time are calculated. This epoch takes the form of <code>days since 1949-12-01</code>, with each data collection (Coupled Model Intercomparison Project (CMIP) generation, model, etc) having its own epoch. The data itself has a temporal dimension if a coordinate variable in the netCDF file has an attribute <code>units</code> with a string value describing an epoch. The coordinate variable, say “time”, has data values such as 43289, which are offsets from the epoch in units of the epoch string (“days” in this case). To convert this offset to a date, using a specific calendar, is what this package does. Given that the calendars supported by the CF Metadata Conventions are not compatible with <code>POSIXt</code>, this conversion is not trivial because the standard R date-time operations do not give correct results. That it is important to account for these differences is easily demonstrated:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/R-CF/CFtime" class="external-link">CFtime</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># POSIXt calculations on a standard calendar</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1949-12-01"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">43289</span></span>
<span><span class="co">#&gt; [1] "2068-06-08"</span></span>
<span></span>
<span><span class="co"># CFtime calculation on a "360_day" calendar</span></span>
<span><span class="fu"><a href="reference/as_timestamp.html">as_timestamp</a></span><span class="op">(</span><span class="fu"><a href="reference/CFtime-function.html">CFtime</a></span><span class="op">(</span><span class="st">"days since 1949-12-01"</span>, <span class="st">"360_day"</span>, <span class="fl">43289</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2070-02-30"</span></span></code></pre></div>
<p>That’s a difference of nearly 21 months! (And yes, 30 February is a valid date on a <code>360_day</code> calendar.)</p>
<p>All defined calendars of the CF Metadata Conventions are supported:</p>
<ul>
<li>
<code>standard</code> or <code>gregorian</code>: This calendar is valid for the Common Era only; it starts at 0001-01-01 00:00:00, i.e. 1 January of year 1. Time periods prior to the introduction of the Gregorian calendar (1582-10-15) use the <code>julian</code> calendar that was in common use then. The 10-day gap between the Julian and Gregorian calendars is observed, so dates in the range 5 to 14 October 1582 are invalid.</li>
<li>
<code>proleptic_gregorian</code>: This calendar uses the Gregorian calendar for periods prior to the introduction of that calendar as well, and it extends to periods before the Common Era, e.g. year 0 and negative years.</li>
<li>
<code>tai</code>: International Atomic Time, a global standard for linear time based on multiple atomic clocks: it counts seconds since its start at 1958-01-01 00:00:00. For presentation it uses the Gregorian calendar. Timestamps prior to its start are not allowed.</li>
<li>
<code>utc</code>: Coordinated Universal Time, the standard for civil timekeeping all over the world. It is based on International Atomic Time but it uses occasional leap seconds to remain synchronous with Earth’s rotation around the Sun; at the end of 2024 it is 37 seconds behind <code>tai</code>. It uses the Gregorian calendar with a start at 1972-01-01 00:00:00; earlier timestamps are not allowed. Future timestamps are also not allowed because the insertion of leap seconds is unpredictable. Most computer clocks synchronize against UTC but calculations of periods do not consider leap seconds.</li>
<li>
<code>julian</code>: The <code>julian</code> calendar has a leap year every four years, including centennial years. Otherwise it is the same as the <code>standard</code> calendar.</li>
<li>
<code>365_day</code> or <code>noleap</code>: This is a “model time” calendar in which no leap years occur. Year 0 exists, as well as years prior to that.</li>
<li>
<code>366_day</code> or <code>all_leap</code>: This is a “model time” calendar in which all years are leap years. Year 0 exists, as well as years prior to that.</li>
<li>
<code>360_day</code>: This is a “model time” calendar in which every year has 360 days divided over 12 months of 30 days each. Year 0 exists, as well as years prior to that.</li>
<li>
<code>none</code>: Perpetual “calendar” for experiments that are simulated on a given instant during the year. All the elements in this calendar thus represent the same instant in time.</li>
</ul>
<p>Use of custom calendars is currently not supported.</p>
<p>This package facilitates use of a suite of models of climate projections that use different calendars in a consistent manner. This package is particularly useful for working with climate projection data having a daily or higher resolution, but it will work equally well on data with a lower resolution.</p>
<p>Timestamps are generated using the <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO8601 standard</a>.</p>
<p>Calendar-aware factors can be generated to support processing of data using <code><a href="https://rdrr.io/r/base/tapply.html" class="external-link">tapply()</a></code> and similar functions. Merging of multiple data sets and subsetting facilitate analysis while preserving computer resources.</p>
<div class="section level2">
<h2 id="working-with-cftime">Working with CFtime<a class="anchor" aria-label="anchor" href="#working-with-cftime"></a>
</h2>
<p>Check out the multiple articles that provide detailed instructions and examples for use of this package.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Get the latest stable version on CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"CFtime"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of CFtime from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"R-CF/CFtime"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h2>
<p>This package has been tested with the following data sets:</p>
<ul>
<li>ERA5 (including multiple variables, levels, and mixed ERA5/ERA5T data)</li>
<li>CMIP5</li>
<li>CORDEX</li>
<li>CMIP6</li>
<li>ROMS</li>
</ul>
<p>The package also operates on geographical and/or temporal subsets of data sets so long as the subsetted data complies with the CF Metadata Conventions. This includes subsetting in the <a href="https://cds.climate.copernicus.eu/#!/home" class="external-link">Climate Data Store</a>. Subsetted data from Climate4Impact is not automatically supported because the dimension names are not compliant with the CF Metadata Conventions, use the corresponding dimension names instead.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=CFtime" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/R-CF/CFtime/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/R-CF/CFtime/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CFtime</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Patrick Van Laake <br><small class="roles"> Author, maintainer, copyright holder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/Lifecycle-Stable-green.svg" alt="Lifecycle: Stable"></a></li>
<li><a href="https://cran.r-project.org/package=CFtime" class="external-link"><img src="https://www.r-pkg.org/badges/version/CFtime" alt="CRAN Status"></a></li>
<li><a href="https://cran.r-project.org/package=CFtime" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/CFtime" alt="CRAN Downloads"></a></li>
<li><a href="https://mit-license.org" class="external-link"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="License: GPL v3"></a></li>
<li><a href="https://GitHub.com/R-CF/CFtime/commit/main/" class="external-link"><img src="https://img.shields.io/github/commits-since/R-CF/CFtime/latest.svg?color=green" alt="Commits since release"></a></li>
<li><a href="https://github.com/R-CF/CFtime/commits/main" class="external-link"><img src="https://img.shields.io/github/last-commit/R-CF/CFtime" alt="Last commit"></a></li>
<li><a href="https://github.com/R-CF/CFtime/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/R-CF/CFtime/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/R-CF/CFtime" class="external-link"><img src="https://codecov.io/gh/R-CF/CFtime/branch/main/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Patrick Van Laake.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
